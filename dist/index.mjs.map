{"version":3,"sources":["../src/service/random-verse/index.ts","../src/index.ts"],"sourcesContent":["/* node module imports */\nimport axios, { AxiosResponse } from \"axios\";\n\n/* app imports */\nimport { FetchRandomVerseReturn } from \"../../types\";\n\n/* interface */\ntype ModuleProps = {requestUrl: string};\ntype ModuleReturns = Promise<FetchRandomVerseReturn>;\n\n/* module */\nfunction fetchRandomVerse(props: ModuleProps): ModuleReturns {\n  return new Promise((resolve, reject) => {\n    const { requestUrl } = props;\n\n    /* fetch data */\n    axios.get(requestUrl).then((response) => {\n      if (response.statusText.toLowerCase() !== \"ok\") {\n        throw new Error(\"Api Request Error - Random Verse Fetch\");\n        return;\n      }\n\n      /* format */\n      const { data } = response;\n      const payload = {\n        book: {\n          id: data.verses[0].book_id,\n          name: data.verses[0].book_name\n        },\n        chapter: data.verses[0].chapter,\n        verse: data.verses[0].verse,\n        text: data.text,\n        translation: {\n          id: data.translation_id,\n          name: data.translation_name,\n          note: data.translation_note\n        }\n      };\n\n      /* return to client */\n      resolve({\n        code: \"api-ok\",\n        message: \"Api success - Fetch Random Verse\",\n        payload\n      });\n    })\n    .catch((error) => {\n      reject({\n        code: \"api-fail\",\n        message: \"Something went wrong\",\n        payload: error\n      });\n    });\n  });\n}\nexport default fetchRandomVerse;\n","/* node module imports */\nimport axios, { AxiosResponse } from \"axios\";\n\n/* app imports */\nimport { HolyBibleInt, FetchRandomVerseReturn } from \"./types\";\nimport { RandomVerseProps } from \"./types/random-verse\";\nimport randomVerseHandler from \"./service/random-verse/index\";\n\n/* class */\nclass HolyBible implements HolyBibleInt {\n  baseUrl: string;\n\n  /* @constructor */\n  constructor() {\n    this.baseUrl = \"https://bible-api.com/\";\n  };\n\n  /**\n   * gets a random verse through the api\n   * @arg: RandomVerseProps\n   */\n  async fetchRandomVerse(props: RandomVerseProps): Promise<FetchRandomVerseReturn> {\n    const $this = this;\n    const { langId } = props;\n    const translation = !langId ? \"web\" : langId;\n    const requestUrl = `${$this.baseUrl}?random=verse&translation=${translation}`;\n\n    /* fetch and return to client */\n    const data = await randomVerseHandler({requestUrl});\n    return data;\n  }\n}\n\n/* exports */\nexport default HolyBible;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACA,OAAO,WAA8B;AAUrC,SAAS,iBAAiB,OAAmC;AAC3D,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,UAAM,EAAE,WAAW,IAAI;AAGvB,UAAM,IAAI,UAAU,EAAE,KAAK,CAAC,aAAa;AACvC,UAAI,SAAS,WAAW,YAAY,MAAM,MAAM;AAC9C,cAAM,IAAI,MAAM,wCAAwC;AACxD;AAAA,MACF;AAGA,YAAM,EAAE,KAAK,IAAI;AACjB,YAAM,UAAU;AAAA,QACd,MAAM;AAAA,UACJ,IAAI,KAAK,OAAO,CAAC,EAAE;AAAA,UACnB,MAAM,KAAK,OAAO,CAAC,EAAE;AAAA,QACvB;AAAA,QACA,SAAS,KAAK,OAAO,CAAC,EAAE;AAAA,QACxB,OAAO,KAAK,OAAO,CAAC,EAAE;AAAA,QACtB,MAAM,KAAK;AAAA,QACX,aAAa;AAAA,UACX,IAAI,KAAK;AAAA,UACT,MAAM,KAAK;AAAA,UACX,MAAM,KAAK;AAAA,QACb;AAAA,MACF;AAGA,cAAQ;AAAA,QACN,MAAM;AAAA,QACN,SAAS;AAAA,QACT;AAAA,MACF,CAAC;AAAA,IACH,CAAC,EACA,MAAM,CAAC,UAAU;AAChB,aAAO;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,QACT,SAAS;AAAA,MACX,CAAC;AAAA,IACH,CAAC;AAAA,EACH,CAAC;AACH;AACA,IAAO,uBAAQ;;;AC9Cf,IAAM,YAAN,MAAwC;AAAA;AAAA,EAItC,cAAc;AACZ,SAAK,UAAU;AAAA,EACjB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMM,iBAAiB,OAA0D;AAAA;AAC/E,YAAM,QAAQ;AACd,YAAM,EAAE,OAAO,IAAI;AACnB,YAAM,cAAc,CAAC,SAAS,QAAQ;AACtC,YAAM,aAAa,GAAG,MAAM,OAAO,6BAA6B,WAAW;AAG3E,YAAM,OAAO,MAAM,qBAAmB,EAAC,WAAU,CAAC;AAClD,aAAO;AAAA,IACT;AAAA;AACF;AAGA,IAAO,cAAQ;","names":[]}